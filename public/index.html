<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CSPRNG Live Final</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    #current { font-size: 2em; margin: 20px 0; }
    #previous { font-size: 1.5em; margin: 10px 0; color: gray; }
    #timer { font-size: 1.5em; color: green; }
    #history { margin-top: 20px; font-size: 1.2em; }
  </style>
</head>
<body>
  <h1>üî¢ CSPRNG Live Final</h1>
  <div>‚è± Countdown: <span id="timer">--</span></div>
  <div>üé≤ Current Result: <span id="current">--</span></div>
  <div>‚¨ÖÔ∏è Previous Result: <span id="previous">--</span></div>
  <div>üìú History: <span id="history">--</span></div>

  <script>
    const socket = new WebSocket("wss://" + window.location.host);

    socket.onmessage = (event) => {
      const data = JSON.parse(event.data);

      document.getElementById("current").innerText = data.result || "--";
      document.getElementById("previous").innerText = data.previous || "--";
      document.getElementById("history").innerText = (data.history || []).join(" | ");
    };

    // Countdown based on wall clock
    function updateTimer() {
      const now = new Date();
      const remaining = 60 - now.getSeconds();
      document.getElementById("timer").innerText = remaining + "s";
      setTimeout(updateTimer, 1000);
    }
    updateTimer();
  </script>
</body>
</html>
